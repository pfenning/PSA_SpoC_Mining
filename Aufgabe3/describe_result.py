import numpy as np
from TripInSpace import TripInSpace
from SpoC_Constants import T_DAUER, TIME_TO_MINE_FULLY

solution = np.array([0.0, 6.0, 44.89829432559175, 83.47116357540948, 130.9966784216485, 180.9375413470957, 226.117306761021, 279.79064788951524, 328.20184299414564, 397.1660710199269, 445.2387129518669, 489.9359150142169, 532.2378655762978, 590.5693005187309, 625.8921365907731, 667.5513917986847, 703.9613026661444, 756.9155960745584, 807.3416467840054, 850.1205126139297, 892.8828766265768, 928.8070078722897, 978.9775808769175, 1027.287603616339, 1068.9510570277462, 1119.2098178345923, 1170.142497438265, 1215.8490746101795, 1293.1768923824368, 1338.4589631376539, 1374.1943552729617, 1424.3399412272074, 1479.807002451859, 1544.7504792039024, 1580.221496074216, 1633.6546511649265, 1681.0590242742528, 1720.5595500313777, 1755.7761148850623, 1797.2043048871076, 0.0, 22.89829432559175, 14.572869249817726, 25.525514846239034, 25.940862925447185, 27.179765413925317, 25.673341128494215, 26.41119510463037, 40.964228025781246, 24.07264193193996, 26.697202062350033, 26.301950562080936, 30.331434942433, 29.322836072042275, 17.659255207911563, 22.40991086745975, 28.954293408413893, 26.426050709447047, 24.77886582992423, 18.762364012647105, 19.924131245712886, 22.170573004627844, 28.310022739421548, 27.66345341140705, 28.258760806846166, 28.932679603672707, 23.706577171914414, 49.32781777225733, 27.28207075521709, 27.73539213530777, 28.14558595424574, 27.46706122465157, 44.9434767520434, 23.471016870313733, 29.433155090710454, 27.40437310932633, 21.50052575712502, 21.21656485368463, 21.428190002045326, 29.795695112892417, 5333, 2661, 926, 8370, 1385, 8829, 4745, 2172, 1133, 9332, 2522, 9703, 9588, 6781, 4149, 9717, 3167, 8719, 4467, 555, 2728, 7356, 5793, 6945, 4587, 4722, 601, 4203, 831, 9938, 9018, 6321, 2, 5383, 1070, 3606, 8237, 3690, 404, 7163])
idx_split1 = int(len(solution)/3)
idx_split2 = 2*idx_split1
t_arr_test = solution[:idx_split1]
t_m_test = solution[idx_split1:idx_split2]
a_test = [int(a_now) for a_now in solution[idx_split2:]]

trip = TripInSpace(t_arr_test, t_m_test, a_test)
trip.pretty()

print(f"Erreichtes Gütemaß: {trip.get_score(len(a_test)-1):.2f}")
print(f"Bestand am Ende: {trip.bestand[-1]}")
print(f"Mittlere Zeit eines Flugs + eines Abbaus: {T_DAUER/(len(a_test)-1):.2f}")
print(f"Mittlere Flugzeit: {np.mean([trip.get_tof(i) for i in range(1,len(a_test))]):.2f}")
print(f"Mittlere Abbauzeit (ohne Startasteroiden): {np.mean(trip.t_m[1:]):.2f}")
print(f"Verhältnis Zeit mit der Rohstoffe (ohne Tank) abgebaut wurde im Verhältnis zur Gesamtzeit: {np.sum(trip.bestand[-1][:3])*TIME_TO_MINE_FULLY/T_DAUER:.2f}")
print(f"Wie viel Material wurde zurückgelassen: {trip.get_all_missed_materials_yet(len(a_test)-1):.2f}")
print(f"Mittlere Masse der angeflogenen Asteroiden: {np.mean([[trip.get_mass(i) for i in range(1,len(a_test))]]):2f}")
print(f"Flugzeiten: {[trip.get_tof(i) for i in range(1,len(a_test))]}")
print(f"Verbrauchtes DV: {trip.dv}")